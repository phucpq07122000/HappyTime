{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridFilterableColumnLookupSelector } from '../columns/gridColumnsSelector';\nimport { GridPreferencePanelsValue } from '../preferencesPanel/gridPreferencePanelsValue';\nimport { getDefaultGridFilterModel } from './gridFilterState';\nimport { gridFilterModelSelector } from './gridFilterSelector';\nimport { useFirstRender } from '../../utils/useFirstRender';\nimport { GRID_ROOT_GROUP_ID, gridRowTreeSelector } from '../rows';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { GRID_DEFAULT_STRATEGY, useGridRegisterStrategyProcessor } from '../../core/strategyProcessing';\nimport { buildAggregatedFilterApplier, sanitizeFilterModel, mergeStateWithFilterModel, cleanFilterItem, passFilterLogic } from './gridFilterUtils';\nimport { isDeepEqual } from '../../../utils/utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const filterStateInitializer = (state, props, apiRef) => {\n  var _ref, _props$filterModel, _props$initialState, _props$initialState$f;\n  const filterModel = (_ref = (_props$filterModel = props.filterModel) != null ? _props$filterModel : (_props$initialState = props.initialState) == null ? void 0 : (_props$initialState$f = _props$initialState.filter) == null ? void 0 : _props$initialState$f.filterModel) != null ? _ref : getDefaultGridFilterModel();\n  return _extends({}, state, {\n    filter: {\n      filterModel: sanitizeFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef),\n      visibleRowsLookup: {},\n      filteredDescendantCountLookup: {}\n    }\n  });\n};\n\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n * @requires useGridRows (event)\n */\nexport const useGridFilter = (apiRef, props) => {\n  var _props$initialState3, _props$initialState3$, _props$slotProps2;\n  const logger = useGridLogger(apiRef, 'useGridFilter');\n  apiRef.current.registerControlState({\n    stateId: 'filter',\n    propModel: props.filterModel,\n    propOnChange: props.onFilterModelChange,\n    stateSelector: gridFilterModelSelector,\n    changeEvent: 'filterModelChange'\n  });\n  const updateFilteredRows = React.useCallback(() => {\n    apiRef.current.setState(state => {\n      const filterModel = gridFilterModelSelector(state, apiRef.current.instanceId);\n      const isRowMatchingFilters = props.filterMode === 'client' ? buildAggregatedFilterApplier(filterModel, apiRef) : null;\n      const filteringResult = apiRef.current.applyStrategyProcessor('filtering', {\n        isRowMatchingFilters,\n        filterModel: filterModel != null ? filterModel : getDefaultGridFilterModel()\n      });\n      return _extends({}, state, {\n        filter: _extends({}, state.filter, filteringResult)\n      });\n    });\n    apiRef.current.publishEvent('filteredRowsSet');\n  }, [props.filterMode, apiRef]);\n  const addColumnMenuItem = React.useCallback((columnMenuItems, colDef) => {\n    if (colDef == null || colDef.filterable === false || props.disableColumnFilter) {\n      return columnMenuItems;\n    }\n    return [...columnMenuItems, 'columnMenuFilterItem'];\n  }, [props.disableColumnFilter]);\n\n  /**\n   * API METHODS\n   */\n  const applyFilters = React.useCallback(() => {\n    updateFilteredRows();\n    apiRef.current.forceUpdate();\n  }, [apiRef, updateFilteredRows]);\n  const upsertFilterItem = React.useCallback(item => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const items = [...filterModel.items];\n    const itemIndex = items.findIndex(filterItem => filterItem.id === item.id);\n    if (itemIndex === -1) {\n      items.push(item);\n    } else {\n      items[itemIndex] = item;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'upsertFilterItem');\n  }, [apiRef]);\n  const upsertFilterItems = React.useCallback(items => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const existingItems = [...filterModel.items];\n    items.forEach(item => {\n      const itemIndex = items.findIndex(filterItem => filterItem.id === item.id);\n      if (itemIndex === -1) {\n        existingItems.push(item);\n      } else {\n        existingItems[itemIndex] = item;\n      }\n    });\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'upsertFilterItems');\n  }, [apiRef]);\n  const deleteFilterItem = React.useCallback(itemToDelete => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const items = filterModel.items.filter(item => item.id !== itemToDelete.id);\n    if (items.length === filterModel.items.length) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'deleteFilterItem');\n  }, [apiRef]);\n  const showFilterPanel = React.useCallback(targetColumnField => {\n    logger.debug('Displaying filter panel');\n    if (targetColumnField) {\n      const filterModel = gridFilterModelSelector(apiRef);\n      const filterItemsWithValue = filterModel.items.filter(item => {\n        var _column$filterOperato;\n        if (item.value !== undefined) {\n          // Some filters like `isAnyOf` support array as `item.value`.\n          // If array is empty, we want to remove it from the filter model.\n          if (Array.isArray(item.value) && item.value.length === 0) {\n            return false;\n          }\n          return true;\n        }\n        const column = apiRef.current.getColumn(item.field);\n        const filterOperator = (_column$filterOperato = column.filterOperators) == null ? void 0 : _column$filterOperato.find(operator => operator.value === item.operator);\n        const requiresFilterValue = typeof (filterOperator == null ? void 0 : filterOperator.requiresFilterValue) === 'undefined' ? true : filterOperator == null ? void 0 : filterOperator.requiresFilterValue;\n\n        // Operators like `isEmpty` don't have and don't require `item.value`.\n        // So we don't want to remove them from the filter model if `item.value === undefined`.\n        // See https://github.com/mui/mui-x/issues/5402\n        if (requiresFilterValue) {\n          return false;\n        }\n        return true;\n      });\n      let newFilterItems;\n      const filterItemOnTarget = filterItemsWithValue.find(item => item.field === targetColumnField);\n      const targetColumn = apiRef.current.getColumn(targetColumnField);\n      if (filterItemOnTarget) {\n        newFilterItems = filterItemsWithValue;\n      } else if (props.disableMultipleColumnsFiltering) {\n        newFilterItems = [cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)];\n      } else {\n        newFilterItems = [...filterItemsWithValue, cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)];\n      }\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n    apiRef.current.showPreferences(GridPreferencePanelsValue.filters);\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  const hideFilterPanel = React.useCallback(() => {\n    logger.debug('Hiding filter panel');\n    apiRef.current.hidePreferences();\n  }, [apiRef, logger]);\n  const setFilterLogicOperator = React.useCallback(logicOperator => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    if (filterModel.logicOperator === logicOperator) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      logicOperator\n    }), 'changeLogicOperator');\n  }, [apiRef]);\n  const setQuickFilterValues = React.useCallback(values => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    if (isDeepEqual(filterModel.quickFilterValues, values)) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      quickFilterValues: [...values]\n    }));\n  }, [apiRef]);\n  const setFilterModel = React.useCallback((model, reason) => {\n    const currentModel = gridFilterModelSelector(apiRef);\n    if (currentModel !== model) {\n      logger.debug('Setting filter model');\n      apiRef.current.updateControlState('filter', mergeStateWithFilterModel(model, props.disableMultipleColumnsFiltering, apiRef), reason);\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  const filterApi = {\n    setFilterLogicOperator,\n    unstable_applyFilters: applyFilters,\n    deleteFilterItem,\n    upsertFilterItem,\n    upsertFilterItems,\n    setFilterModel,\n    showFilterPanel,\n    hideFilterPanel,\n    setQuickFilterValues\n  };\n  useGridApiMethod(apiRef, filterApi, 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    var _props$initialState2, _props$initialState2$;\n    const filterModelToExport = gridFilterModelSelector(apiRef);\n    const shouldExportFilterModel =\n    // Always export if the `exportOnlyDirtyModels` property is not activated\n    !context.exportOnlyDirtyModels ||\n    // Always export if the model is controlled\n    props.filterModel != null ||\n    // Always export if the model has been initialized\n    ((_props$initialState2 = props.initialState) == null ? void 0 : (_props$initialState2$ = _props$initialState2.filter) == null ? void 0 : _props$initialState2$.filterModel) != null ||\n    // Export if the model is not equal to the default value\n    !isDeepEqual(filterModelToExport, getDefaultGridFilterModel());\n    if (!shouldExportFilterModel) {\n      return prevState;\n    }\n    return _extends({}, prevState, {\n      filter: {\n        filterModel: filterModelToExport\n      }\n    });\n  }, [apiRef, props.filterModel, (_props$initialState3 = props.initialState) == null ? void 0 : (_props$initialState3$ = _props$initialState3.filter) == null ? void 0 : _props$initialState3$.filterModel]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    var _context$stateToResto;\n    const filterModel = (_context$stateToResto = context.stateToRestore.filter) == null ? void 0 : _context$stateToResto.filterModel;\n    if (filterModel == null) {\n      return params;\n    }\n    apiRef.current.updateControlState('filter', mergeStateWithFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef), 'restoreState');\n    return _extends({}, params, {\n      callbacks: [...params.callbacks, apiRef.current.unstable_applyFilters]\n    });\n  }, [apiRef, props.disableMultipleColumnsFiltering]);\n  const preferencePanelPreProcessing = React.useCallback((initialValue, value) => {\n    if (value === GridPreferencePanelsValue.filters) {\n      var _props$slotProps;\n      const FilterPanel = props.slots.filterPanel;\n      return /*#__PURE__*/_jsx(FilterPanel, _extends({}, (_props$slotProps = props.slotProps) == null ? void 0 : _props$slotProps.filterPanel));\n    }\n    return initialValue;\n  }, [props.slots.filterPanel, (_props$slotProps2 = props.slotProps) == null ? void 0 : _props$slotProps2.filterPanel]);\n  const flatFilteringMethod = React.useCallback(params => {\n    if (props.filterMode === 'client' && params.isRowMatchingFilters) {\n      const tree = gridRowTreeSelector(apiRef);\n      const rowIds = tree[GRID_ROOT_GROUP_ID].children;\n      const filteredRowsLookup = {};\n      for (let i = 0; i < rowIds.length; i += 1) {\n        const rowId = rowIds[i];\n        let isRowPassing;\n        if (typeof rowId === 'string' && rowId.startsWith('auto-generated-group-footer')) {\n          isRowPassing = true;\n        } else {\n          const {\n            passingFilterItems,\n            passingQuickFilterValues\n          } = params.isRowMatchingFilters(rowId);\n          isRowPassing = passFilterLogic([passingFilterItems], [passingQuickFilterValues], params.filterModel, apiRef);\n        }\n        filteredRowsLookup[rowId] = isRowPassing;\n      }\n      return {\n        filteredRowsLookup,\n        // For flat tree, the `visibleRowsLookup` and the `filteredRowsLookup` are equals since no row is collapsed.\n        visibleRowsLookup: filteredRowsLookup,\n        filteredDescendantCountLookup: {}\n      };\n    }\n    return {\n      visibleRowsLookup: {},\n      filteredRowsLookup: {},\n      filteredDescendantCountLookup: {}\n    };\n  }, [apiRef, props.filterMode]);\n  useGridRegisterPipeProcessor(apiRef, 'columnMenu', addColumnMenuItem);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n  useGridRegisterStrategyProcessor(apiRef, GRID_DEFAULT_STRATEGY, 'filtering', flatFilteringMethod);\n\n  /**\n   * EVENTS\n   */\n  const handleColumnsChange = React.useCallback(() => {\n    logger.debug('onColUpdated - GridColumns changed, applying filters');\n    const filterModel = gridFilterModelSelector(apiRef);\n    const filterableColumnsLookup = gridFilterableColumnLookupSelector(apiRef);\n    const newFilterItems = filterModel.items.filter(item => item.field && filterableColumnsLookup[item.field]);\n    if (newFilterItems.length < filterModel.items.length) {\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n  }, [apiRef, logger]);\n  const handleStrategyProcessorChange = React.useCallback(methodName => {\n    if (methodName === 'filtering') {\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef]);\n\n  // Do not call `apiRef.current.forceUpdate` to avoid re-render before updating the sorted rows.\n  // Otherwise, the state is not consistent during the render\n  useGridApiEventHandler(apiRef, 'rowsSet', updateFilteredRows);\n  useGridApiEventHandler(apiRef, 'rowExpansionChange', apiRef.current.unstable_applyFilters);\n  useGridApiEventHandler(apiRef, 'columnsChange', handleColumnsChange);\n  useGridApiEventHandler(apiRef, 'activeStrategyProcessorChange', handleStrategyProcessorChange);\n\n  /**\n   * 1ST RENDER\n   */\n  useFirstRender(() => {\n    apiRef.current.unstable_applyFilters();\n  });\n\n  /**\n   * EFFECTS\n   */\n  React.useEffect(() => {\n    if (props.filterModel !== undefined) {\n      apiRef.current.setFilterModel(props.filterModel);\n    }\n  }, [apiRef, logger, props.filterModel]);\n};","map":{"version":3,"names":["_extends","React","useGridApiEventHandler","useGridApiMethod","useGridLogger","gridFilterableColumnLookupSelector","GridPreferencePanelsValue","getDefaultGridFilterModel","gridFilterModelSelector","useFirstRender","GRID_ROOT_GROUP_ID","gridRowTreeSelector","useGridRegisterPipeProcessor","GRID_DEFAULT_STRATEGY","useGridRegisterStrategyProcessor","buildAggregatedFilterApplier","sanitizeFilterModel","mergeStateWithFilterModel","cleanFilterItem","passFilterLogic","isDeepEqual","jsx","_jsx","filterStateInitializer","state","props","apiRef","_ref","_props$filterModel","_props$initialState","_props$initialState$f","filterModel","initialState","filter","disableMultipleColumnsFiltering","visibleRowsLookup","filteredDescendantCountLookup","useGridFilter","_props$initialState3","_props$initialState3$","_props$slotProps2","logger","current","registerControlState","stateId","propModel","propOnChange","onFilterModelChange","stateSelector","changeEvent","updateFilteredRows","useCallback","setState","instanceId","isRowMatchingFilters","filterMode","filteringResult","applyStrategyProcessor","publishEvent","addColumnMenuItem","columnMenuItems","colDef","filterable","disableColumnFilter","applyFilters","forceUpdate","upsertFilterItem","item","items","itemIndex","findIndex","filterItem","id","push","setFilterModel","upsertFilterItems","existingItems","forEach","deleteFilterItem","itemToDelete","length","showFilterPanel","targetColumnField","debug","filterItemsWithValue","_column$filterOperato","value","undefined","Array","isArray","column","getColumn","field","filterOperator","filterOperators","find","operator","requiresFilterValue","newFilterItems","filterItemOnTarget","targetColumn","showPreferences","filters","hideFilterPanel","hidePreferences","setFilterLogicOperator","logicOperator","setQuickFilterValues","values","quickFilterValues","model","reason","currentModel","updateControlState","unstable_applyFilters","filterApi","stateExportPreProcessing","prevState","context","_props$initialState2","_props$initialState2$","filterModelToExport","shouldExportFilterModel","exportOnlyDirtyModels","stateRestorePreProcessing","params","_context$stateToResto","stateToRestore","callbacks","preferencePanelPreProcessing","initialValue","_props$slotProps","FilterPanel","slots","filterPanel","slotProps","flatFilteringMethod","tree","rowIds","children","filteredRowsLookup","i","rowId","isRowPassing","startsWith","passingFilterItems","passingQuickFilterValues","handleColumnsChange","filterableColumnsLookup","handleStrategyProcessorChange","methodName","useEffect"],"sources":["C:/Users/Tran Ho/Desktop/happy_time/HappyTime/happytime/node_modules/@mui/x-data-grid/hooks/features/filter/useGridFilter.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { useGridApiEventHandler } from '../../utils/useGridApiEventHandler';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { gridFilterableColumnLookupSelector } from '../columns/gridColumnsSelector';\nimport { GridPreferencePanelsValue } from '../preferencesPanel/gridPreferencePanelsValue';\nimport { getDefaultGridFilterModel } from './gridFilterState';\nimport { gridFilterModelSelector } from './gridFilterSelector';\nimport { useFirstRender } from '../../utils/useFirstRender';\nimport { GRID_ROOT_GROUP_ID, gridRowTreeSelector } from '../rows';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { GRID_DEFAULT_STRATEGY, useGridRegisterStrategyProcessor } from '../../core/strategyProcessing';\nimport { buildAggregatedFilterApplier, sanitizeFilterModel, mergeStateWithFilterModel, cleanFilterItem, passFilterLogic } from './gridFilterUtils';\nimport { isDeepEqual } from '../../../utils/utils';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const filterStateInitializer = (state, props, apiRef) => {\n  var _ref, _props$filterModel, _props$initialState, _props$initialState$f;\n  const filterModel = (_ref = (_props$filterModel = props.filterModel) != null ? _props$filterModel : (_props$initialState = props.initialState) == null ? void 0 : (_props$initialState$f = _props$initialState.filter) == null ? void 0 : _props$initialState$f.filterModel) != null ? _ref : getDefaultGridFilterModel();\n  return _extends({}, state, {\n    filter: {\n      filterModel: sanitizeFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef),\n      visibleRowsLookup: {},\n      filteredDescendantCountLookup: {}\n    }\n  });\n};\n\n/**\n * @requires useGridColumns (method, event)\n * @requires useGridParamsApi (method)\n * @requires useGridRows (event)\n */\nexport const useGridFilter = (apiRef, props) => {\n  var _props$initialState3, _props$initialState3$, _props$slotProps2;\n  const logger = useGridLogger(apiRef, 'useGridFilter');\n  apiRef.current.registerControlState({\n    stateId: 'filter',\n    propModel: props.filterModel,\n    propOnChange: props.onFilterModelChange,\n    stateSelector: gridFilterModelSelector,\n    changeEvent: 'filterModelChange'\n  });\n  const updateFilteredRows = React.useCallback(() => {\n    apiRef.current.setState(state => {\n      const filterModel = gridFilterModelSelector(state, apiRef.current.instanceId);\n      const isRowMatchingFilters = props.filterMode === 'client' ? buildAggregatedFilterApplier(filterModel, apiRef) : null;\n      const filteringResult = apiRef.current.applyStrategyProcessor('filtering', {\n        isRowMatchingFilters,\n        filterModel: filterModel != null ? filterModel : getDefaultGridFilterModel()\n      });\n      return _extends({}, state, {\n        filter: _extends({}, state.filter, filteringResult)\n      });\n    });\n    apiRef.current.publishEvent('filteredRowsSet');\n  }, [props.filterMode, apiRef]);\n  const addColumnMenuItem = React.useCallback((columnMenuItems, colDef) => {\n    if (colDef == null || colDef.filterable === false || props.disableColumnFilter) {\n      return columnMenuItems;\n    }\n    return [...columnMenuItems, 'columnMenuFilterItem'];\n  }, [props.disableColumnFilter]);\n\n  /**\n   * API METHODS\n   */\n  const applyFilters = React.useCallback(() => {\n    updateFilteredRows();\n    apiRef.current.forceUpdate();\n  }, [apiRef, updateFilteredRows]);\n  const upsertFilterItem = React.useCallback(item => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const items = [...filterModel.items];\n    const itemIndex = items.findIndex(filterItem => filterItem.id === item.id);\n    if (itemIndex === -1) {\n      items.push(item);\n    } else {\n      items[itemIndex] = item;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'upsertFilterItem');\n  }, [apiRef]);\n  const upsertFilterItems = React.useCallback(items => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const existingItems = [...filterModel.items];\n    items.forEach(item => {\n      const itemIndex = items.findIndex(filterItem => filterItem.id === item.id);\n      if (itemIndex === -1) {\n        existingItems.push(item);\n      } else {\n        existingItems[itemIndex] = item;\n      }\n    });\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'upsertFilterItems');\n  }, [apiRef]);\n  const deleteFilterItem = React.useCallback(itemToDelete => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    const items = filterModel.items.filter(item => item.id !== itemToDelete.id);\n    if (items.length === filterModel.items.length) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      items\n    }), 'deleteFilterItem');\n  }, [apiRef]);\n  const showFilterPanel = React.useCallback(targetColumnField => {\n    logger.debug('Displaying filter panel');\n    if (targetColumnField) {\n      const filterModel = gridFilterModelSelector(apiRef);\n      const filterItemsWithValue = filterModel.items.filter(item => {\n        var _column$filterOperato;\n        if (item.value !== undefined) {\n          // Some filters like `isAnyOf` support array as `item.value`.\n          // If array is empty, we want to remove it from the filter model.\n          if (Array.isArray(item.value) && item.value.length === 0) {\n            return false;\n          }\n          return true;\n        }\n        const column = apiRef.current.getColumn(item.field);\n        const filterOperator = (_column$filterOperato = column.filterOperators) == null ? void 0 : _column$filterOperato.find(operator => operator.value === item.operator);\n        const requiresFilterValue = typeof (filterOperator == null ? void 0 : filterOperator.requiresFilterValue) === 'undefined' ? true : filterOperator == null ? void 0 : filterOperator.requiresFilterValue;\n\n        // Operators like `isEmpty` don't have and don't require `item.value`.\n        // So we don't want to remove them from the filter model if `item.value === undefined`.\n        // See https://github.com/mui/mui-x/issues/5402\n        if (requiresFilterValue) {\n          return false;\n        }\n        return true;\n      });\n      let newFilterItems;\n      const filterItemOnTarget = filterItemsWithValue.find(item => item.field === targetColumnField);\n      const targetColumn = apiRef.current.getColumn(targetColumnField);\n      if (filterItemOnTarget) {\n        newFilterItems = filterItemsWithValue;\n      } else if (props.disableMultipleColumnsFiltering) {\n        newFilterItems = [cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)];\n      } else {\n        newFilterItems = [...filterItemsWithValue, cleanFilterItem({\n          field: targetColumnField,\n          operator: targetColumn.filterOperators[0].value\n        }, apiRef)];\n      }\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n    apiRef.current.showPreferences(GridPreferencePanelsValue.filters);\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  const hideFilterPanel = React.useCallback(() => {\n    logger.debug('Hiding filter panel');\n    apiRef.current.hidePreferences();\n  }, [apiRef, logger]);\n  const setFilterLogicOperator = React.useCallback(logicOperator => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    if (filterModel.logicOperator === logicOperator) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      logicOperator\n    }), 'changeLogicOperator');\n  }, [apiRef]);\n  const setQuickFilterValues = React.useCallback(values => {\n    const filterModel = gridFilterModelSelector(apiRef);\n    if (isDeepEqual(filterModel.quickFilterValues, values)) {\n      return;\n    }\n    apiRef.current.setFilterModel(_extends({}, filterModel, {\n      quickFilterValues: [...values]\n    }));\n  }, [apiRef]);\n  const setFilterModel = React.useCallback((model, reason) => {\n    const currentModel = gridFilterModelSelector(apiRef);\n    if (currentModel !== model) {\n      logger.debug('Setting filter model');\n      apiRef.current.updateControlState('filter', mergeStateWithFilterModel(model, props.disableMultipleColumnsFiltering, apiRef), reason);\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef, logger, props.disableMultipleColumnsFiltering]);\n  const filterApi = {\n    setFilterLogicOperator,\n    unstable_applyFilters: applyFilters,\n    deleteFilterItem,\n    upsertFilterItem,\n    upsertFilterItems,\n    setFilterModel,\n    showFilterPanel,\n    hideFilterPanel,\n    setQuickFilterValues\n  };\n  useGridApiMethod(apiRef, filterApi, 'public');\n\n  /**\n   * PRE-PROCESSING\n   */\n  const stateExportPreProcessing = React.useCallback((prevState, context) => {\n    var _props$initialState2, _props$initialState2$;\n    const filterModelToExport = gridFilterModelSelector(apiRef);\n    const shouldExportFilterModel =\n    // Always export if the `exportOnlyDirtyModels` property is not activated\n    !context.exportOnlyDirtyModels ||\n    // Always export if the model is controlled\n    props.filterModel != null ||\n    // Always export if the model has been initialized\n    ((_props$initialState2 = props.initialState) == null ? void 0 : (_props$initialState2$ = _props$initialState2.filter) == null ? void 0 : _props$initialState2$.filterModel) != null ||\n    // Export if the model is not equal to the default value\n    !isDeepEqual(filterModelToExport, getDefaultGridFilterModel());\n    if (!shouldExportFilterModel) {\n      return prevState;\n    }\n    return _extends({}, prevState, {\n      filter: {\n        filterModel: filterModelToExport\n      }\n    });\n  }, [apiRef, props.filterModel, (_props$initialState3 = props.initialState) == null ? void 0 : (_props$initialState3$ = _props$initialState3.filter) == null ? void 0 : _props$initialState3$.filterModel]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    var _context$stateToResto;\n    const filterModel = (_context$stateToResto = context.stateToRestore.filter) == null ? void 0 : _context$stateToResto.filterModel;\n    if (filterModel == null) {\n      return params;\n    }\n    apiRef.current.updateControlState('filter', mergeStateWithFilterModel(filterModel, props.disableMultipleColumnsFiltering, apiRef), 'restoreState');\n    return _extends({}, params, {\n      callbacks: [...params.callbacks, apiRef.current.unstable_applyFilters]\n    });\n  }, [apiRef, props.disableMultipleColumnsFiltering]);\n  const preferencePanelPreProcessing = React.useCallback((initialValue, value) => {\n    if (value === GridPreferencePanelsValue.filters) {\n      var _props$slotProps;\n      const FilterPanel = props.slots.filterPanel;\n      return /*#__PURE__*/_jsx(FilterPanel, _extends({}, (_props$slotProps = props.slotProps) == null ? void 0 : _props$slotProps.filterPanel));\n    }\n    return initialValue;\n  }, [props.slots.filterPanel, (_props$slotProps2 = props.slotProps) == null ? void 0 : _props$slotProps2.filterPanel]);\n  const flatFilteringMethod = React.useCallback(params => {\n    if (props.filterMode === 'client' && params.isRowMatchingFilters) {\n      const tree = gridRowTreeSelector(apiRef);\n      const rowIds = tree[GRID_ROOT_GROUP_ID].children;\n      const filteredRowsLookup = {};\n      for (let i = 0; i < rowIds.length; i += 1) {\n        const rowId = rowIds[i];\n        let isRowPassing;\n        if (typeof rowId === 'string' && rowId.startsWith('auto-generated-group-footer')) {\n          isRowPassing = true;\n        } else {\n          const {\n            passingFilterItems,\n            passingQuickFilterValues\n          } = params.isRowMatchingFilters(rowId);\n          isRowPassing = passFilterLogic([passingFilterItems], [passingQuickFilterValues], params.filterModel, apiRef);\n        }\n        filteredRowsLookup[rowId] = isRowPassing;\n      }\n      return {\n        filteredRowsLookup,\n        // For flat tree, the `visibleRowsLookup` and the `filteredRowsLookup` are equals since no row is collapsed.\n        visibleRowsLookup: filteredRowsLookup,\n        filteredDescendantCountLookup: {}\n      };\n    }\n    return {\n      visibleRowsLookup: {},\n      filteredRowsLookup: {},\n      filteredDescendantCountLookup: {}\n    };\n  }, [apiRef, props.filterMode]);\n  useGridRegisterPipeProcessor(apiRef, 'columnMenu', addColumnMenuItem);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'preferencePanel', preferencePanelPreProcessing);\n  useGridRegisterStrategyProcessor(apiRef, GRID_DEFAULT_STRATEGY, 'filtering', flatFilteringMethod);\n\n  /**\n   * EVENTS\n   */\n  const handleColumnsChange = React.useCallback(() => {\n    logger.debug('onColUpdated - GridColumns changed, applying filters');\n    const filterModel = gridFilterModelSelector(apiRef);\n    const filterableColumnsLookup = gridFilterableColumnLookupSelector(apiRef);\n    const newFilterItems = filterModel.items.filter(item => item.field && filterableColumnsLookup[item.field]);\n    if (newFilterItems.length < filterModel.items.length) {\n      apiRef.current.setFilterModel(_extends({}, filterModel, {\n        items: newFilterItems\n      }));\n    }\n  }, [apiRef, logger]);\n  const handleStrategyProcessorChange = React.useCallback(methodName => {\n    if (methodName === 'filtering') {\n      apiRef.current.unstable_applyFilters();\n    }\n  }, [apiRef]);\n\n  // Do not call `apiRef.current.forceUpdate` to avoid re-render before updating the sorted rows.\n  // Otherwise, the state is not consistent during the render\n  useGridApiEventHandler(apiRef, 'rowsSet', updateFilteredRows);\n  useGridApiEventHandler(apiRef, 'rowExpansionChange', apiRef.current.unstable_applyFilters);\n  useGridApiEventHandler(apiRef, 'columnsChange', handleColumnsChange);\n  useGridApiEventHandler(apiRef, 'activeStrategyProcessorChange', handleStrategyProcessorChange);\n\n  /**\n   * 1ST RENDER\n   */\n  useFirstRender(() => {\n    apiRef.current.unstable_applyFilters();\n  });\n\n  /**\n   * EFFECTS\n   */\n  React.useEffect(() => {\n    if (props.filterModel !== undefined) {\n      apiRef.current.setFilterModel(props.filterModel);\n    }\n  }, [apiRef, logger, props.filterModel]);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}